library IEEE;
use IEEE.NUMERIC_STD.ALL;

package synthesizer_package is
    generic(d_voices : INTEGER; d_bits : INTEGER);

    constant VOICES : INTEGER := d_voices;
    constant BIT_DEPTH : INTEGER := d_bits;
    constant NUM_LFO : INTEGER := 3;

    type TYPE_NOTE_CODE is array (0 to VOICES - 1) of INTEGER range 0 to 127;
    
    type TYPE_ADSR_DATA is array (0 to VOICES - 1) of INTEGER range 0 to 100;
    
    type TYPE_DATA_OUT is array (0 to VOICES - 1) of SIGNED(BIT_DEPTH - 1 downto 0);
    
    type TYPE_DETUNE is array (0 to VOICES - 1) of INTEGER;
    
    type TYPE_CYCLES is array (0 to VOICES - 1) of INTEGER;
    
    type TYPE_PULSEW is array (0 to 1) of INTEGER range 0 to 100;
    
    type TYPE_PREV_NOTE is array (0 to 1) of INTEGER range 0 to 127;
    
    type TYPE_LFO_NOTE is array (0 to NUM_LFO - 1) of INTEGER range 0 to 127;
    
    type TYPE_LFO_TYPE is array (0 to NUM_LFO - 1) of INTEGER range 0 to 3;
    
    type TYPE_LFO_DATA is array (0 to NUM_LFO - 1) of UNSIGNED(23 downto 0);

    constant POW_2_16 : INTEGER := 2 ** 16;
    constant POW_2_24 : INTEGER := 2 ** 24;
    
    constant sinetable_size : INTEGER := 4096 - 1;

    type TYPE_TABLE100 is array (0 to 100) of INTEGER range 0 to 65536;
	constant fixed_mult : TYPE_TABLE100 := (
	    0, 655, 1310, 1966, 2621, 3276, 3932, 4587, 5242, 5898, 6553,
        7208, 7864, 8519, 9175, 9830, 10485, 11141, 11796, 12451, 13107,
        13762, 14417, 15073, 15728, 16384, 17039, 17694, 18350, 19005, 19660,
        20316, 20971, 21626, 22282, 22937, 23592, 24248, 24903, 25559, 26214,
        26869, 27525, 28180, 28835, 29491, 30146, 30801, 31457, 32112, 32768,
        33423, 34078, 34734, 35389, 36044, 36700, 37355, 38010, 38666, 39321,
        39976, 40632, 41287, 41943, 42598, 43253, 43909, 44564, 45219, 45875,
        46530, 47185, 47841, 48496, 49152, 49807, 50462, 51118, 51773, 52428,
        53084, 53739, 54394, 55050, 55705, 56360, 57016, 57671, 58327, 58982,
        59637, 60293, 60948, 61603, 62259, 62914, 63569, 64225, 64880, 65536
	);
	
	type TYPE_TABLE127 is array (0 to 127) of INTEGER;
	constant sample_cycle : TYPE_TABLE127 := (
        5393,5091,4805,4535,4281,4040,3814,3600,3397,3207,3027,2857,2696,2545,2402,2267,2140,2020,1907,1800,1698,1603,
        1513,1428,1348,1272,1201,1133,1070,1010,953,900,849,801,756,714,674,636,600,566,535,505,476,450,424,400,378,
        357,337,318,300,283,267,252,238,225,212,200,189,178,168,159,150,141,133,126,119,112,106,100,94,89,84,79,75,
        70,66,63,59,56,53,50,47,44,42,39,37,35,33,31,29,28,26,25,23,22,21,19,18,17,16,15,14,14,13,12,11,11,10,9,9,
        8,8,7,7,7,6,6,5,5,5,4,4,4,4,3,3,3
	);
	
	constant lfo_cycle : TYPE_TABLE127 := (
	   282240,141120,94080,70560,56448,47040,40320,35280,31360,28224,25658,23520,21710,20160,18816,17640,16602,15680,14854,14112,
	   13440,12829,12271,11760,11289,10855,10453,10080,9732,9408,9104,8820,8552,8301,8064,7840,7628,7427,7236,7056,6883,6720,
	   6563,6414,6272,6135,6005,5880,5760,5644,5534,5427,5325,5226,5131,5040,4951,4866,4783,4704,4626,4552,4480,4410,4342,
	   4276,4212,4150,4090,4032,3975,3920,3866,3814,3763,3713,3665,3618,3572,3528,3484,3441,3400,3360,3320,3281,3244,3207,
	   3171,3136,3101,3067,3034,3002,2970,2940,2909,2880,2850,2822,2794,2767,2740,2713,2688,2662,2637,2613,2589,2565,2542,
	   2520,2497,2475,2454,2433,2412,2391,2371,2352,2332,2313,2294,2276,2257,2240,2222,2205
	);
	
	constant lfo_inc : TYPE_TABLE127 := (
	   59,118,178,237,297,356,416,475,534,594,653,713,772,832,891,951,1010,1069,1129,1188,1248,1307,1367,1426,1486,1545,1605,1664,
	   1723,1783,1842,1902,1961,2021,2080,2139,2199,2258,2318,2377,2437,2496,2556,2615,2674,2734,2793,2853,2912,2972,3031,3091,
	   3150,3210,3269,3328,3388,3447,3507,3566,3626,3685,3744,3804,3863,3923,3983,4042,4102,4161,4220,4279,4339,4398,4458,4518,
	   4577,4637,4696,4755,4815,4875,4934,4993,5053,5113,5171,5231,5290,5349,5410,5470,5529,5588,5648,5706,5767,5825,5886,5945,
	   6004,6063,6123,6184,6241,6302,6362,6420,6480,6540,6600,6657,6718,6778,6836,6895,6955,7016,7076,7133,7194,7253,7313,7371,
	   7433,7489,7550,7608
	);
	
	constant lfo_index : TYPE_TABLE127 := (
	   3,3,3,4,4,4,4,4,5,5,5,6,6,6,7,7,8,8,8,9,9,10,11,11,12,13,13,14,15,16,17,18,19,20,21,23,24,25,27,28,30,32,34,36,38,40,43,45,
	   48,51,54,57,60,64,68,72,76,80,85,90,96,101,107,114,121,128,135,143,152,161,171,181,191,203,215,228,241,256,271,287,304,322,
	   341,361,383,406,430,455,482,511,542,574,608,644,682,723,766,811,860,911,965,1022,1083,1147,1216,1288,1365,1446,1532,1623,
	   1719,1822,1930,2045,2166,2295,2431,2576,2729,2891,3063,3246,3439,3643,3860,4089,4332,4590
	);
	
	type TYPE_VOICE_P is array (0 to 31) of INTEGER;
	constant voice_percent : TYPE_VOICE_P := (
	   100,50,33,25,20,16,14,12,11,10,9,8,7,7,6,6,5,5,5,5,4,4,4,4,4,3,3,3,3,3,3,3
	);

end package synthesizer_package;